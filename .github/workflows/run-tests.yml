name: CI/CD Pipeline

on:
  push:
    branches: [ main, module-6-prep ]
  pull_request:
    branches: [ main, module-6-prep ]
  workflow_dispatch:

jobs:
  python-tests:
    name: Python Unit Tests
    uses: ./.github/workflows/python-unit-tests.yml
    with:
      python-version: '3.12'
  
  security-analysis:
    name: Security Analysis
    uses: ./.github/workflows/codeql-analysis.yml
  
  docker-builds:
    name: Docker Container Builds
    uses: ./.github/workflows/docker-builds.yml
    needs: [python-tests]  # Only build containers if tests pass