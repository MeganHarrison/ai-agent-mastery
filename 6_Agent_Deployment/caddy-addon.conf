# Agent API reverse proxy
subdomain.yourdomain.com {
    # Rate limiting: 100 requests per minute per IP
    rate_limit {
        zone agent_api {
            key {remote_host}
            events 100
            window 1m
        }
    }
    
    # Request body size limit (10MB)
    request_body {
        max_size 10MB
    }
    
    reverse_proxy agent-api:8001
}

# Frontend reverse proxy
subdomain2.yourdomain.com {
    # Rate limiting: 200 requests per minute per IP (more lenient for frontend assets)
    rate_limit {
        zone frontend {
            key {remote_host}
            events 200
            window 1m
        }
    }
    
    # Request body size limit (10MB)
    request_body {
        max_size 10MB
    }
    
    reverse_proxy frontend:8080
}